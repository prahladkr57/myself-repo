window.theme=window.theme||{},theme.debounce=function(func,timeout=300){let timer;return(...args)=>{clearTimeout(timer),timer=setTimeout(()=>{func.apply(this,args)},timeout)}},theme.search=function(){const buttonOpen=document.querySelector(".sb__open"),buttonClose=document.querySelector(".sb__close"),header=document.querySelector(".header"),input=document.querySelector(".sf__input"),placeholder=document.querySelector(".sf__placeholder"),result=document.querySelector(".sf__result"),xhttp=new XMLHttpRequest,searchURL="https://pagefly.io/search?type=page,article";buttonOpen?.addEventListener("click",event=>{event.preventDefault(),header.classList.add("is-search-show"),header.classList.remove("is-search-hide");var mask=document.createElement("DIV");mask.classList.add("mask"),document.body.appendChild(mask),setTimeout(function(){input.focus(),input.value="",mask.classList.add("mask--opened")},300)}),input?.addEventListener("focus",e=>{header.classList.add("si--focus")}),input?.addEventListener("input",e=>{header.classList.remove("si--focus"),header.classList.add("si--inputing")}),buttonClose?.addEventListener("click",event=>{event.preventDefault(),header.classList.remove("is-search-show"),header.classList.add("is-search-hide"),header.classList.remove("si--focus"),header.classList.remove("si--inputing"),input.value="",placeholder.style.opacity=1,document.querySelector(".mask")?.classList.remove("mask--opened"),result.innerHTML="",setTimeout(function(){document.querySelector(".mask").remove()},300)});const xhttpRq=function(str){xhttp.onreadystatechange=function(){let output="";this.readyState==4&&this.status==200&&(data=JSON.parse(xhttp.responseText),data.results_total>0?(data.results.forEach(function(item,index){output+='<div class="sf__item pr">',output+='<a class="pa wf hf sf__link" href="'+item.url+'"></a>',output+='<h3 class="sf__title text-x5">'+item.title+"</h3>",output+='<div class="sf__meta">',item.type=="page"?output+="<span>Page</span>":(output+='<span class="sf__author">Posted by '+item.author+"</span>",output+='<span class="sf__time pr">'+item.time+"</span>"),output+="</div>",output+="</div>"}),data.results_total>4&&(output+='<a class="sf__all center button button--outline button--large" href="'+searchURL+"&q="+str+'">See all result</a>'),setTimeout(function(){result.classList.add("sf__result--loaded"),result.classList.remove("sf__blank")},50),result.innerHTML=output):(result.classList.add("sf__blank"),result.innerHTML='<h3 class="sf__empty text-x6 center">Sorry we did not find any matching results</h3>'))},result.classList.remove("sf__result--loaded"),xhttp.open("GET",searchURL+"&view=json&q="+str,!0),xhttp.send()},ajaxSearch=theme.debounce(xhttpRq,500);input?.addEventListener("input",event=>{const str=event.target.value;if(str.length>0){placeholder.style.opacity=0;let loading="";loading='<div class="sf__loading center df"><div class="spin"><i></i><i></i><i></i><i></i></div></div>',result.innerHTML=loading}else placeholder.removeAttribute("style");str.length>3&&ajaxSearch(str)})},theme.sticky=function(){let activeEl=null;const header=document.querySelector(".header"),headerHeight=header.offsetHeight,body=document.body;let pageOffset=window.pageYOffset;const triggerAttributeSelector="data-toc-trigger",attributeSelector="data-toc-section",sectionEls=document.querySelectorAll(`[${attributeSelector}]`),triggerEls=document.querySelectorAll(`[${triggerAttributeSelector}]`),filter=document.querySelector(".filter"),template=document.querySelector(".template__body"),pricingTable=document.querySelector(".pricing-table"),pricingTableHeader=document.querySelector(".pricing-table > div:first-child");function isElementInView(el){const rect=el.getBoundingClientRect(),offset=body.classList.contains("is-header-sticky")?headerHeight:0;return rect.y<=offset&&rect.y+rect.height>0}const handleInview=theme.debounce(function(el){el.classList.add("toc--active")},50);function handleOutView(el){el.classList.remove("toc--active")}window.pageYOffset>0?(body.classList.add("is-header-sticky"),header.classList.add("header-sticky")):(body.classList.remove("is-header-sticky"),header.classList.remove("header-sticky")),window.onscroll=function(e){window.pageYOffset>0?(body.classList.add("is-header-sticky"),header.classList.add("header-sticky")):(body.classList.remove("is-header-sticky"),header.classList.remove("header-sticky")),template!==null&&(isElementInView(template)?(filter.classList.add("sticky"),body.classList.add("is-double-sticky")):(filter.classList.remove("sticky"),body.classList.remove("is-double-sticky"))),pricingTable!==null&&(isElementInView(pricingTable)?pricingTableHeader.classList.add("sticky"):pricingTableHeader.classList.remove("sticky")),sectionEls.forEach(el=>{const attributeValue=el.getAttribute(attributeSelector),triggerElement=attributeValue&&document.querySelector(`[${triggerAttributeSelector}='${attributeValue}']`);triggerElement&&isElementInView(el)&&(activeEl&&!activeEl.isSameNode(triggerElement)&&(handleOutView(activeEl),activeEl=null),(!activeEl||activeEl&&activeEl.isSameNode(triggerElement))&&(activeEl=triggerElement,handleInview(activeEl)))}),pageOffset=window.pageYOffset},triggerEls.forEach(el=>{el.addEventListener("click",event=>{event.preventDefault();const attributeValue=el.getAttribute(triggerAttributeSelector),sectionElement=attributeValue&&document.querySelector(`[${attributeSelector}='${attributeValue}']`),offset=window.pageYOffset>sectionElement.offsetTop?74:0;window.scroll({top:sectionElement.getBoundingClientRect().top+window.scrollY,behavior:"smooth"})})})},theme.mobileMenu=function(){const header=document.querySelector(".header"),buttonOpen=document.querySelector(".mm__open"),buttonClose=document.querySelector(".mm__close"),body=document.body;buttonOpen?.addEventListener("click",event=>{event.preventDefault(),header.classList.add("is-menu-show"),body.classList.add("oh")}),buttonClose?.addEventListener("click",event=>{event.preventDefault(),header.classList.remove("is-menu-show"),header.classList.remove("si--focus"),header.classList.remove("si--inputing"),body.classList.remove("oh")});for(const subMenu of document.querySelectorAll("[data-sub-menu]"))subMenu?.addEventListener("click",function(event){event.preventDefault(),this.classList.toggle("active"),this.parentElement.classList.toggle("activated"),this.parentElement.querySelector(".menu__child").classList.toggle("activated")})},theme.modal=function(){const button=document.querySelector(".button--install"),buttonClose=document.querySelector(".modal__close"),body=document.body;for(const button2 of document.querySelectorAll(".button--install"))button2.addEventListener("click",function(event){event.preventDefault(),body.classList.add("is-modal-show")});buttonClose?.addEventListener("click",event=>{event.preventDefault(),body.classList.remove("is-modal-show")})},theme.chatbox=function(){const button=document.querySelector("[data-chatbox]");button&&button.addEventListener("click",event=>{event.preventDefault(),$crisp.push(["do","chat:open"])})},theme.cookie=function(){const cookieStorage={getItem:item=>document.cookie.split(";").map(cookie=>cookie.split("=")).reduce((acc,[key,value])=>({...acc,[key.trim()]:value}),{})[item],setItem:(item,value)=>{document.cookie=`${item}=${value};`}},storageType=cookieStorage,consentPropertyName="__pf_consent",shouldShowPopup=()=>!storageType.getItem(consentPropertyName),saveToStorage=()=>storageType.setItem(consentPropertyName,!0);window.onload=()=>{const acceptFn=event=>{saveToStorage(storageType),consentPopup.classList.add("dn"),event.preventDefault()},consentPopup=document.querySelector(".cookie"),cookieManager=document.querySelector(".cookie-manager"),acceptBtn=document.querySelector("[data-cookie-accept]"),declineBtn=document.querySelector("[data-cookie-decline]"),cookieManagerTrigger=document.querySelectorAll('[href="#cookie-manager"]'),cookieSave=document.querySelector("[data-cookie-save]");acceptBtn?.addEventListener("click",acceptFn);const acceptInput=document.getElementById("analytics-n-customization");acceptInput?.addEventListener("click",function(){this.checked?cookieStorage.setItem(consentPropertyName,!0):cookieStorage.setItem(consentPropertyName,!1)}),storageType.getItem("__pf_consent")==="true"?acceptInput.checked=!0:acceptInput.checked=!1,shouldShowPopup(storageType)&&setTimeout(()=>{consentPopup.classList.remove("dn")},5e3);for(const button of cookieManagerTrigger)button?.addEventListener("click",function(event){event.preventDefault(),cookieManager.classList.remove("dn"),consentPopup.classList.add("dn"),document.body.classList.add("is-cm-show")});cookieSave?.addEventListener("click",function(event){event.preventDefault(),cookieManager.classList.add("dn"),document.body.classList.remove("is-cm-show");const defaultConsentOptions={event:"consent_updated",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"},grantedOptions={analytics_storage:"granted",ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted"},deniedOptions={analytics_storage:"denied",ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied"};acceptInput.checked?(cookieStorage.setItem(consentPropertyName,!0),window.dataLayer.push({...defaultConsentOptions,...grantedOptions})):(cookieStorage.setItem(consentPropertyName,!1),window.dataLayer.push({...defaultConsentOptions,...deniedOptions}))})}},theme.stickyBar=function(){const buttonClose=document.querySelector("[data-bar-close]"),bar=document.querySelector(".bar");localStorage.getItem("__pf_popup")||!document.querySelector(".bar")?document.body.classList.remove("is-bar-show"):setTimeout(()=>{bar&&bar.classList.remove("dn"),document.body.classList.add("is-bar-show"),document.body.style.setProperty("--bar-height",bar.clientHeight+"px")},1e3),buttonClose&&buttonClose.addEventListener("click",function(event){event.preventDefault(),localStorage.setItem("__pf_popup",!1),bar.classList.add("dn"),document.body.classList.remove("is-bar-show")})},theme.languageSwitcher=function(){const buttonLang=document.querySelector(".language-switcher");buttonLang&&buttonLang.addEventListener("click",function(event){this.classList.toggle("menu-show")})},theme.countdownTimer=function(){var days,hours,minutes,seconds,countdown=document.getElementById("countdown");if(countdown!==null){var time=countdown.getAttribute("data-time"),target_date=new Date(time).getTime();setInterval(function(){var current_date=new Date().getTime(),seconds_left=(target_date-current_date)/1e3;days=parseInt(seconds_left/86400),seconds_left=seconds_left%86400,hours=parseInt(seconds_left/3600),seconds_left=seconds_left%3600,minutes=parseInt(seconds_left/60),seconds=parseInt(seconds_left%60),countdown.innerHTML="<div><span>"+days+"</span><span>days</span></div><div><span>"+hours+"</span><span>hours</span></div><div><span>"+minutes+"</span><span>minutes</span></div><div><span>"+seconds+"</span><span>seconds</span></div>"},1e3)}},theme.popup=function(){const buttonClose=document.querySelector("[data-popup-close]"),body=document.body,pfPopup=localStorage.getItem("__pf_popup_")||!document.querySelector(".popup"),delay=document.querySelector(".popup")?.getAttribute("data-popup-delay")||1e3;console.log(delay,"donny delay"),pfPopup?body.classList.remove("is-popup-show"):setTimeout(()=>{body.classList.add("is-popup-show")},delay),buttonClose&&buttonClose.addEventListener("click",function(event){event.preventDefault(),localStorage.setItem("__pf_popup_",!1),body.classList.remove("is-popup-show")})},theme.popupOverlay=function(){const buttonClose=document.querySelector("[data-popup-overlay-close]"),overlay=document.querySelector(".popup-n-overlay");sessionStorage.getItem("__pf_popup_overlay")||!overlay||setTimeout(()=>{overlay.classList.remove("dn"),overlay.classList.add("df")},1e4);function showHide(){sessionStorage.setItem("__pf_popup_overlay",!0),overlay.classList.add("dn"),overlay.classList.remove("df")}buttonClose&&buttonClose.addEventListener("click",function(event){event.preventDefault(),showHide()})},theme.marquee=function(){const elm=document.querySelector(".marquee");if(elm===null)return;let elementWidth=elm.offsetWidth,parentWidth=elm.parentElement.offsetWidth,flag=0,intervalId,isRunning=!1;function run(){isRunning=!0,intervalId=setInterval(()=>{elm.style.marginLeft=--flag+"px",elementWidth==-flag&&(flag=parentWidth)},10)}run();var btn=document.createElement("SPAN");btn.classList.add("play"),elm.appendChild(btn);const button=document.querySelector(".play");button.addEventListener("click",e=>{button.classList.toggle("pause"),isRunning?(clearInterval(intervalId),isRunning=!1):run()})},theme.animation=function(){window.sr=new ScrollReveal;const anmText=document.querySelectorAll(".anm-text"),heroIMG=document.querySelector(".anm-hero"),logoIMG=document.querySelectorAll(".anm-logo");anmText.forEach(function(el){const delay=el.getAttribute("data-delay"),distance=el.getAttribute("data-distance"),origin=el.getAttribute("data-origin"),duration=el.getAttribute("data-duration");sr.reveal(el,{delay:delay||300,distance:distance||"30px",origin:origin||"top",easing:"ease",useDelay:"onload",duration:duration|800})}),sr.reveal(heroIMG,{delay:"1200",distance:"50px",origin:"bottom",easing:"ease",duration:1600}),logoIMG.forEach(function(el){const delay=el.getAttribute("data-delay");sr.reveal(el,{delay:delay||600,easing:"ease",duration:800,scale:0})})},theme.addRemoveClassOnScroll=function(){var element=[].slice.call(document.querySelectorAll(".promotion-lightbox"));const observer=new IntersectionObserver((entries,observer2)=>{const entriesLength=entries.length;for(let i=0;i<entriesLength;i++)entries[i].isIntersecting?document.body.classList.add("mask-lightbox"):document.body.classList.remove("mask-lightbox")},{rootMargin:"0px",threshold:.05});for(let i=0;i<element.length;i++)observer.observe(element[i])};class ArticlePromoBox extends HTMLElement{constructor(){super(),this.promoLightBox=this.dataset.promotionLightbox,this.myWindowHeight=window.innerHeight*.7,this.scrollEventHandle=this.onScrollEventHandle.bind(this)}connectedCallback(){this.bindEventHandlers()}bindEventHandlers(){this.promoLightBox!=null&&window.addEventListener("scroll",this.scrollEventHandle)}onScrollEventHandle(){const boxOffSetTop=this.getBoundingClientRect().top,scrollPosition=window.scrollY;boxOffSetTop<this.myWindowHeight&&boxOffSetTop>85?this.classList.add("highted"):this.classList.remove("highted")}}customElements.define("article-promotion-box",ArticlePromoBox);class PopupSection extends HTMLElement{constructor(){super(),this.closePopupBtn=this.querySelector(".js-popup-close-btn")}connectedCallback(){this.closePopup()}closePopup(){this.closePopupBtn.addEventListener("click",()=>{document.body.classList.remove("is-popup-show")})}}customElements.define("sht-popup",PopupSection),theme.init=function(){theme.animation(),theme.search(),theme.mobileMenu(),theme.chatbox(),theme.cookie(),theme.stickyBar(),theme.languageSwitcher(),theme.countdownTimer(),theme.popup(),theme.popupOverlay(),theme.marquee(),theme.addRemoveClassOnScroll(),document.addEventListener("DOMContentLoaded",function(){theme.sticky(),theme.modal()})},theme.init();
//# sourceMappingURL=/cdn/shop/t/10/assets/javascript.js.map?v=113680010625136697901722869640
